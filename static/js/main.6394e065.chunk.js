(this["webpackJsonpproject-canvas"]=this["webpackJsonpproject-canvas"]||[]).push([[0],{13:function(e,n,t){e.exports=t(20)},18:function(e,n,t){},19:function(e,n,t){},20:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(10),c=t.n(i),s=(t(18),t(11)),o=t(2),u=t(1),l=t(4),m=t(5),p=t(7),h=t(6),f=t(8);t(19);function v(e){return a.a.createElement("form",null,a.a.createElement("label",{className:"file-input"},a.a.createElement("input",{type:"file",onChange:function(n){if(" "!==n.target.files){var t=n.target.files,r=new FileReader;1===t.length&&(r.readAsText(t[0]),r.onload=function(n){e.checkData(n.target.result)})}},onClick:function(e){e.target.form.reset()},accept:".txt"}),"Upload File"))}function b(e){var n=e.errors.map((function(e){return a.a.createElement("div",{className:"error",key:"".concat(e.id).concat(e.rule)},"Error on line ",e.rule,": ",e.meta)}));return a.a.createElement("div",{className:"errors-list"},n)}var d=t(12);function N(e){return a.a.createElement("div",{className:"cell",style:{background:function(){var n=(new Option).style;if(n.color=e.cell," "===e.cell)return"#ffffff";if(""!==n.color)return e.cell;for(var t=e.cell.split("").map((function(e){return"00".concat(e.charCodeAt(0).toString(2)).slice(-6)})).map((function(e){return e.match(/.{1,2}/g)})),r=Array(3),a=function(e){r[e]=t.reduce((function(n,t){return n+parseInt(t[e],2)}),0)},i=0;i<3;i++)a(i);var c=Math.max.apply(Math,Object(o.a)(r));return r=r.map((function(e){return e/c*255})),"rgb(".concat(r[0],", ").concat(r[1],", ").concat(r[2],")")}(),width:e.dimension,height:e.dimension}})}var g={CANVAS:"C",LINE:"L",RECTANGLE:"R",BUCKET_FILL:"B"},y={noCanvasFound:1,invalidNumberOfArguments:2,invalidArguments:3,invalidFunction:4},I=function(e,n,t,r,a){if(n===r)for(var i=Math.min(t,a),c=Math.max(t,a);i<=c;i++)e[i][n]="x";else for(var s=Math.min(n,r),o=Math.max(n,r);s<=o;s++)e[t][s]="x"},O=Object(d.a)((function(e,n){for(var t=n.width,r=n.height,a=new Array(r),i=0;i<a.length;i++){a[i]=new Array(t);for(var c=0;c<t;c++)a[i][c]=" "}return e.forEach((function(e){var n=Object(u.a)(e),t=n[0],r=n.slice(1);if(t===g.LINE){var i=Number.parseInt(r[0])-1,c=Number.parseInt(r[1])-1,s=Number.parseInt(r[2])-1,o=Number.parseInt(r[3])-1;I(a,i,c,s,o)}else if(t===g.RECTANGLE){var l=Number.parseInt(r[0])-1,m=Number.parseInt(r[1])-1,p=Number.parseInt(r[2])-1,h=Number.parseInt(r[3])-1;!function(e,n,t,r,a){I(e,n,t,r,t),I(e,n,t,n,a),I(e,r,t,r,a),I(e,n,a,r,a)}(a,l,m,p,h)}else if(t===g.BUCKET_FILL){var f=Number.parseInt(r[0])-1,v=Number.parseInt(r[1])-1;!function(e,n,t,r){for(var a=e[t][n],i=[{x:n,y:t}];0!==i.length;){var c=i.pop(),s=c.x,o=c.y;e[o][s]=r,o>0&&e[o-1][s]===a&&i.push({x:s,y:o-1}),o<e.length-1&&e[o+1][s]===a&&i.push({x:s,y:o+1}),s>0&&e[o][s-1]===a&&i.push({x:s-1,y:o}),s<e[0].length-1&&e[o][s+1]===a&&i.push({x:s+1,y:o})}}(a,f,v,r[2])}})),a})),E=function(e){function n(){var e,t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(p.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).state={canvas:[]},t}return Object(f.a)(n,e),Object(m.a)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.rules.join("")!==e.rules.join("")||this.props.cellDimension!==e.cellDimension}},{key:"render",value:function(){var e=this,n=this.state.canvas.map((function(n,t){return a.a.createElement("div",{key:t,className:"row"},n.map((function(n,r){return a.a.createElement(N,{key:"".concat(t,"-").concat(r),dimension:e.props.cellDimension,cell:n})})))}));return a.a.createElement("div",{className:"canvas"},n)}}],[{key:"getDerivedStateFromProps",value:function(e){return{canvas:O(e.rules,e.canvasDimension)}}}]),n}(r.Component);function j(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{className:"dimension-label"},"Cell dimension:"),a.a.createElement("input",{type:"number",value:e.cellDimension,onChange:e.changeCellDimension,className:"dimension-input"}))}var w="valid";function x(e,n,t){var r=Object(u.a)(e),a=r[0],i=r.slice(1);switch(a){case g.CANVAS:return function(e){return 2!==e.length?{id:y.invalidNumberOfArguments,meta:"C should have 2 arguments"}:isNaN(Number.parseInt(e[0]))||isNaN(Number.parseInt(e[1]))||Number.parseInt(e[0])<1||Number.parseInt(e[1])<1?{id:y.invalidArguments,meta:"C arguments should have format [number number] (number > 0)"}:{valid:w,width:Number.parseInt(e[0]),height:Number.parseInt(e[1])}}(i);case g.LINE:return function(e,n,t){return 4!==e.length?{id:y.invalidNumberOfArguments,meta:"L should have 4 arguments"}:A(e,n,t)?{id:y.invalidArguments,meta:"L arguments should have format [x y x1 y1] (x, y, x1, y1 = number; 0 < x, x1 < ".concat(n+1,"; 0 < y, y1 < ").concat(t+1,")")}:Number.parseInt(e[0])!==Number.parseInt(e[2])&&Number.parseInt(e[1])!==Number.parseInt(e[3])?{id:y.invalidArguments,meta:"L can not execute for diagonal lines"}:w}(i,n,t);case g.RECTANGLE:return function(e,n,t){return 4!==e.length?{id:y.invalidNumberOfArguments,meta:"R should have 4 arguments"}:A(e,n,t)?{id:y.invalidArguments,meta:"R arguments should have format [x y x1 y1] (x, y, x1, y1 = number; 0 < x, x1 < ".concat(n+1,"; 0 < y, y1 < ").concat(t+1,")")}:w}(i,n,t);case g.BUCKET_FILL:return function(e,n,t){return 3!==e.length?{id:y.invalidNumberOfArguments,meta:"B should have 3 arguments"}:function(e,n,t){return isNaN(Number.parseInt(e[0]))||isNaN(Number.parseInt(e[1]))||Number.parseInt(e[0])<1||Number.parseInt(e[1])<1||Number.parseInt(e[0])>n||Number.parseInt(e[1])>t||e[2].length<1}(e,n,t)?{id:y.invalidArguments,meta:"B arguments should have format [x y color] (x, y = number; 0 < x < ".concat(n+1,"; 0 < y < ").concat(t+1,"; color = singl symbol)")}:w}(i,n,t);default:return function(e){return{id:y.invalidFunction,meta:"".concat(e," function does not exist")}}(a)}}function A(e,n,t){return isNaN(Number.parseInt(e[0]))||isNaN(Number.parseInt(e[1]))||isNaN(Number.parseInt(e[2]))||isNaN(Number.parseInt(e[3]))||Number.parseInt(e[0])<1||Number.parseInt(e[1])<1||Number.parseInt(e[2])<1||Number.parseInt(e[3])<1||Number.parseInt(e[0])>n||Number.parseInt(e[1])>t||Number.parseInt(e[2])>n||Number.parseInt(e[3])>t}function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){Object(s.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){function n(){var e,t;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(p.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).state={drawingRules:[],errors:[],cellDimension:15,canvasDimension:{width:null,height:null}},t.checkData=function(e){var n=[],r=e.split("\n"),a=r=r.filter((function(e){return e.replace(/^\s*$/g,"")})),i=Object(u.a)(a),c=i[0],s=i.slice(1),l=c.split(" ");if(l[0]!==g.CANVAS)n=[].concat(Object(o.a)(n),[{id:y.noCanvasFound,rule:1,meta:"".concat(l[0]," shoulde be equal to ").concat(g.CANVAS)}]);else{var m=x(l),p=m.valid,h=m.width,f=m.height;p===w&&t.setState({canvasDimension:{width:h,height:f},drawingRules:[]})}0===n.length&&s.forEach((function(e,r){var a=e.trim().split(" ");if(a[0]===g.CANVAS)n=[].concat(Object(o.a)(n),[{id:y.invalidFunction,rule:r+2,meta:"canvas is already initialized"}]);else{var i=t.state.canvasDimension,c=x(a,i.width,i.height);c!==w&&(n=[].concat(Object(o.a)(n),[C({},c,{rule:r+2})]))}})),0===n.length?t.setState({drawingRules:s.map((function(e){return e.split(" ")})),errors:[]}):t.setState({errors:n,drawingRules:[]})},t.changeCellDimension=function(e){e.target.value<1?t.setState({cellDimension:1}):e.target.value>50?t.setState({cellDimension:50}):t.setState({cellDimension:Number.parseInt(e.target.value)})},t}return Object(f.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this.state,n=e.drawingRules,t=e.canvasDimension,r=e.errors,i=e.cellDimension,c=n.length?a.a.createElement(E,{rules:n,canvasDimension:t,cellDimension:i}):a.a.createElement(b,{errors:r}),s=Boolean(n.length)&&a.a.createElement(j,{cellDimension:i,changeCellDimension:this.changeCellDimension});return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"input-container"},a.a.createElement(v,{checkData:this.checkData}),s),c)}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.6394e065.chunk.js.map